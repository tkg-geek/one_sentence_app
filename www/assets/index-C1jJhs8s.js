const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ns0FZQR4.js","assets/index-Dx94FHnN.js","assets/index-CrhlNrZI.js"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function c(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function h(s){if(s.ep)return;s.ep=!0;const e=c(s);fetch(s.href,e)}})();const E="modulepreload",w=function(u){return"/"+u},m={},v=function(o,c,h){let s=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),i=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));s=Promise.allSettled(c.map(n=>{if(n=w(n),n in m)return;m[n]=!0;const r=n.endsWith(".css"),d=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${d}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":E,r||(l.as="script"),l.crossOrigin="",l.href=n,i&&l.setAttribute("nonce",i),document.head.appendChild(l),r)return new Promise((g,p)=>{l.addEventListener("load",g),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})}))}function e(t){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=t,window.dispatchEvent(i),!i.defaultPrevented)throw t}return s.then(t=>{for(const i of t||[])i.status==="rejected"&&e(i.reason);return o().catch(e)})};document.addEventListener("DOMContentLoaded",async()=>{console.log("DOM Content Loaded");try{let u,o;try{const s=await v(()=>import("./index-ns0FZQR4.js"),__vite__mapDeps([0,1])),e=await v(()=>import("./index-CrhlNrZI.js"),__vite__mapDeps([2,1]));u=s.App,o=e.Haptics,console.log("Capacitor modules imported successfully")}catch(s){console.log("Capacitor import error:",s)}class c{constructor(){console.log("TextEditor constructor called"),this.init(),this.bindEvents(),this.initSortable(),this.setupKeyboardHandling()}init(){console.log("Initializing TextEditor"),this.textAreas=document.getElementById("textAreas"),this.addButton=document.getElementById("addButton"),this.saveButton=document.getElementById("saveButton"),this.deleteButton=document.getElementById("deleteButton"),this.playButton=document.getElementById("playButton"),console.log("Elements found:",{textAreas:!!this.textAreas,addButton:!!this.addButton,saveButton:!!this.saveButton,deleteButton:!!this.deleteButton,playButton:!!this.playButton}),this.loadFromStorage()}initSortable(){Sortable.create(this.textAreas,{animation:150,handle:".drag-handle",ghostClass:"dragging",dragClass:"dragging",onStart:e=>{e.item.classList.add("dragging")},onEnd:e=>{e.item.classList.remove("dragging")}})}bindEvents(){console.log("Binding events"),[{el:this.addButton,action:()=>this.addTextField(),id:"addButton"},{el:this.saveButton,action:()=>this.saveToStorage(),id:"saveButton"},{el:this.deleteButton,action:()=>this.clearStorage(),id:"deleteButton"},{el:this.playButton,action:()=>this.startFullscreen(),id:"playButton"}].forEach(({el:t,action:i,id:n})=>{if(!t){console.error(`Button ${n} not found`);return}console.log(`Setting up events for ${n}`);const r=d=>{console.log(`${n} action triggered`),d.preventDefault(),d.stopPropagation(),i()};if("ontouchstart"in window){let d=!1;t.addEventListener("touchstart",l=>{console.log(`${n} touchstart triggered`),d=!0,l.preventDefault(),l.stopPropagation(),t.style.opacity="0.7"},{passive:!1}),t.addEventListener("touchend",l=>{console.log(`${n} touchend triggered`),d&&(d=!1,l.preventDefault(),l.stopPropagation(),t.style.opacity="1.0",r(l))},{passive:!1}),t.addEventListener("touchcancel",l=>{console.log(`${n} touchcancel triggered`),d=!1,l.preventDefault(),l.stopPropagation(),t.style.opacity="1.0"})}t.addEventListener("click",r)}),console.log("Events binding completed"),this.setupClearButton(this.textAreas.querySelector(".text-container"))}isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}setupKeyboardHandling(){window.addEventListener("keyboardWillShow",()=>{document.body.classList.add("keyboard-visible"),this.adjustViewForKeyboard(!0)}),window.addEventListener("keyboardWillHide",()=>{document.body.classList.remove("keyboard-visible"),this.adjustViewForKeyboard(!1)}),document.addEventListener("focusin",e=>{e.target.classList.contains("text-input")&&this.adjustViewForKeyboard(!0)}),document.addEventListener("focusout",e=>{e.target.classList.contains("text-input")&&this.adjustViewForKeyboard(!1)})}adjustViewForKeyboard(e){const t=document.querySelector("main");if(e){const i=document.activeElement;i&&i.classList.contains("text-input")&&setTimeout(()=>{i.scrollIntoView({behavior:"smooth",block:"center"})},100),t.style.paddingBottom="200px"}else t.style.paddingBottom="0",window.scrollTo({top:0,behavior:"smooth"})}addTextField(){console.log("Adding new text field");const e=document.createElement("div");e.className="text-container";const t=document.createElement("div");t.className="drag-handle";const i=document.createElement("div");i.className="drag-dots",t.appendChild(i);const n=document.createElement("input");n.type="text",n.className="text-input",n.placeholder="+ テキストを追加する",n.setAttribute("inputmode","text"),n.setAttribute("enterkeyhint","done");const r=document.createElement("button");r.className="clear-button",r.textContent="✕",e.appendChild(t),e.appendChild(n),e.appendChild(r),this.textAreas.appendChild(e),this.setupClearButton(e)}setupClearButton(e){console.log("Setting up clear button");const t=e.querySelector(".clear-button"),i=e.querySelector(".text-input");if(!t||!i){console.error("Clear button or input not found in container");return}const n=()=>{console.log("Clear action triggered"),e===this.textAreas.firstElementChild?(console.log("Clearing first input value"),i.value=""):(console.log("Removing container"),e.remove())};t.addEventListener("touchend",r=>{console.log("Clear button touchend triggered"),r.preventDefault(),r.stopPropagation(),t.style.opacity="1.0",n()},{passive:!1}),t.addEventListener("click",r=>{console.log("Clear button click triggered"),r.preventDefault(),r.stopPropagation(),n()}),t.addEventListener("touchstart",r=>{console.log("Clear button touchstart triggered"),r.preventDefault(),r.stopPropagation(),t.style.opacity="0.7"},{passive:!1}),console.log("Clear button setup completed")}saveToStorage(){const e=Array.from(this.textAreas.querySelectorAll(".text-input")).map(t=>t.value);localStorage.setItem("savedTexts",JSON.stringify(e)),alert("保存しました")}loadFromStorage(){JSON.parse(localStorage.getItem("savedTexts")||"[]").forEach((t,i)=>{if(i===0)this.textAreas.querySelector(".text-input").value=t;else{this.addTextField();const n=this.textAreas.querySelectorAll(".text-input");n[n.length-1].value=t}})}clearStorage(){localStorage.removeItem("savedTexts"),Array.from(this.textAreas.querySelectorAll(".text-container")).forEach((e,t)=>{t===0?e.querySelector(".text-input").value="":e.remove()}),alert("削除しました")}startFullscreen(){console.log("Starting fullscreen mode");const e=document.getElementById("fullscreenView"),t=e.querySelector(".fullscreen-text"),i=Array.from(this.textAreas.querySelectorAll(".text-input")).map(a=>a.value).filter(a=>a.trim()!=="");if(i.length===0){console.log("No texts to display");return}let n=0;const r=()=>{console.log("Showing text at index:",n),t.textContent=i[n],o&&o.impact({style:"light"})},d=()=>{console.log("Exiting fullscreen mode"),o&&o.notification({type:"success"}),e.removeEventListener("click",g),document.removeEventListener("touchstart",p,{passive:!1}),e.classList.add("hidden")},l=async a=>{console.log("Navigation:",a?"forward":"backward"),a?n<i.length-1?(o&&await o.impact({style:"medium"}),n++,r()):d():n>0?(o&&await o.impact({style:"medium"}),n--,r()):d()},g=async a=>{a.preventDefault(),a.stopPropagation();const y=a.type==="click"?a.clientX:a.touches[0].clientX,x=window.innerWidth/2,f=y>x;console.log("Tap detected on:",f?"right side":"left side"),o&&await o.impact({style:"light"}),l(f)},p=a=>{a.preventDefault()};console.log("Setting up tap events"),e.addEventListener("click",g),document.addEventListener("touchstart",p,{passive:!1}),e.style.webkitTapHighlightColor="transparent",e.style.webkitTouchCallout="none",e.style.webkitUserSelect="none",e.style.userSelect="none",console.log("Showing fullscreen view"),e.classList.remove("hidden"),r()}}const h=new c;if(console.log("TextEditor initialized"),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.register("/sw.js");console.log("ServiceWorker registration successful")}catch(s){console.log("ServiceWorker registration failed:",s)}}catch(u){console.error("Application initialization error:",u)}});class S{constructor(){this.fullscreenView=document.getElementById("fullscreenView"),this.fullscreenText=this.fullscreenView.querySelector(".fullscreen-text"),this.currentIndex=0,this.texts=[],this.setupEventListeners()}setupEventListeners(){this.fullscreenView.addEventListener("touchstart",o=>{o.preventDefault();const c=o.touches[0];this.touchStartX=c.clientX},{passive:!1}),this.fullscreenView.addEventListener("touchend",o=>{o.preventDefault();const h=o.changedTouches[0].clientX,s=h-this.touchStartX;Math.abs(s)<50?this.handleScreenTap(h):s>0?this.showPrevious():this.showNext()},{passive:!1}),this.isIOS()||this.fullscreenView.addEventListener("click",o=>{this.handleScreenTap(o.clientX)})}handleScreenTap(o){const c=window.innerWidth/2;o>c?this.showNext():this.showPrevious()}start(){this.texts=Array.from(document.querySelectorAll(".text-input")).map(o=>o.value).filter(o=>o.trim()!==""),this.texts.length!==0&&(this.currentIndex=0,this.fullscreenView.classList.remove("hidden"),this.showCurrent(),this.isIOS()||document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(o=>console.log("フルスクリーンモードを開始できませんでした:",o)))}isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}showCurrent(){this.fullscreenText.textContent=this.texts[this.currentIndex]}showNext(){this.currentIndex<this.texts.length-1?(this.currentIndex++,this.showCurrent()):this.exit()}showPrevious(){this.currentIndex>0?(this.currentIndex--,this.showCurrent()):this.exit()}exit(){this.fullscreenView.classList.add("hidden"),document.exitFullscreen&&document.exitFullscreen(),screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock()}}document.addEventListener("DOMContentLoaded",()=>{const u=new S;document.getElementById("playButton").addEventListener("click",()=>{u.start()})});export{v as _};
